{% extends this.layout %}

{% block breadcrumbs %}
	{% widget('zii.widgets.CBreadcrumbs', {'links' : ['Акции']}) %}
{% endblock %}

{% block bigColumn %}

	{% registerScript('search',"
	$('.search-button').click(function(){ $('.search-form').toggle(); return false; });
	$('.search-form form').submit(function(){
		$.fn.yiiGridView.update('actions-grid',{data:$(this).serialize()});
		return false;
	});
	") %}

	<h1>Управление акциями</h1>

	<div class="search-form">
		{{ this.renderPartial('_search', {'model' : model}) }}
	</div>

	{% widget('application.components.widgets.AdminGridView',
		{
			'id' : 'actions-grid',
			'dataProvider' : model.search(),
			'columns' :
			[
				'title_ru',
				'title_ua',
				'title_en',
				{
					'name' : 'onMain',
					'value' : '$data->onMain ? "да" : "нет"'
				},
				{
					'name' : 'active',
					'value' : '$data->active ? "да" : "нет"'
				}
			]
		}) %}

{% endblock %}

{% block sidebar %}
	{% set menu = [{'label' : 'Добавить новую акцию', 'url' : ['create']}] %}
	{% beginWidget('zii.widgets.CPortlet', {'title' : 'Действия'}) %}
		{% widget('zii.widgets.CMenu', {'items' : menu, 'htmlOptions' : {'class' : 'operations'}}) %}
	{% endWidget %}
{% endblock %}